<!doctype html>
<html lang="en" class="h-full antialiased">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Tailwind Month Calendar</title>
  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    /* Gentle motion with reduced-motion respect */
    @media (prefers-reduced-motion: no-preference) {
      .fade-in { animation: fade-in 220ms ease-out both; }
      .slide-in-left { animation: slide-in-left 260ms cubic-bezier(.22,1,.36,1) both; }
      .slide-in-right { animation: slide-in-right 260ms cubic-bezier(.22,1,.36,1) both; }
      .press { transform: translateY(1px) scale(.99); }
    }
    @keyframes fade-in { from { opacity: 0 } to { opacity: 1 } }
    @keyframes slide-in-left { from { opacity: 0; transform: translateX(-14px) } to { opacity: 1; transform: translateX(0) } }
    @keyframes slide-in-right { from { opacity: 0; transform: translateX(14px) } to { opacity: 1; transform: translateX(0) } }

    /* Focus ring helper for day cells (high contrast) */
    .focus-ring:focus-visible {
      outline: 2px solid transparent;
      box-shadow:
        0 0 0 2px theme('colors.white'),
        0 0 0 4px theme('colors.indigo.500');
    }
    @media (prefers-color-scheme: dark) {
      .focus-ring:focus-visible {
        box-shadow:
          0 0 0 2px theme('colors.neutral.900'),
          0 0 0 4px theme('colors.indigo.400');
      }
    }
  </style>
</head>
<body class="h-full bg-neutral-50 text-neutral-900 dark:bg-neutral-900 dark:text-neutral-100 selection:bg-indigo-200/60 selection:text-neutral-900">
  <div class="min-h-full py-10 px-4 md:px-8">
    <div class="mx-auto max-w-5xl space-y-4">
      <!-- Header / Controls -->
      <header class="flex items-center justify-between gap-2">
        <div class="flex items-center gap-3">
          <h1 id="monthLabel" class="text-2xl font-semibold tracking-tight"></h1>
          <span id="todayBadge" class="hidden text-xs rounded-full px-2 py-0.5 bg-emerald-100 text-emerald-800 dark:bg-emerald-900/40 dark:text-emerald-200">Today</span>
        </div>
        <div class="flex items-center gap-2">
          <button id="todayBtn"
                  class="rounded-md border border-neutral-300 dark:border-neutral-700 px-3 py-1.5 text-sm font-medium hover:bg-neutral-100 dark:hover:bg-neutral-800 transition"
                  title="Jump to current month (T)">
            Today
          </button>
          <div class="inline-flex rounded-md border border-neutral-300 dark:border-neutral-700 overflow-hidden">
            <button id="prevBtn"
                    class="px-3 py-2 hover:bg-neutral-100 dark:hover:bg-neutral-800 transition"
                    title="Previous month (←)">
              <!-- chevron left -->
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                <path d="M15 18L9 12L15 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </button>
            <button id="nextBtn"
                    class="px-3 py-2 hover:bg-neutral-100 dark:hover:bg-neutral-800 transition"
                    title="Next month (→)">
              <!-- chevron right -->
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                <path d="M9 6L15 12L9 18" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </button>
          </div>
        </div>
      </header>

      <!-- Weekday headings -->
      <div class="grid grid-cols-7 rounded-lg bg-white dark:bg-neutral-800 ring-1 ring-black/5 dark:ring-white/5">
        <div class="col-span-7 grid grid-cols-7 text-xs uppercase tracking-wider text-neutral-500 dark:text-neutral-400 border-b border-neutral-100 dark:border-neutral-700">
          <!-- Sunday-first -->
          <div class="px-2 py-2 text-center">Sun</div>
          <div class="px-2 py-2 text-center">Mon</div>
          <div class="px-2 py-2 text-center">Tue</div>
          <div class="px-2 py-2 text-center">Wed</div>
          <div class="px-2 py-2 text-center">Thu</div>
          <div class="px-2 py-2 text-center">Fri</div>
          <div class="px-2 py-2 text-center">Sat</div>
        </div>

        <!-- Calendar grid -->
        <div id="grid"
             class="col-span-7 grid grid-cols-7 auto-rows-[minmax(96px,1fr)] md:auto-rows-[minmax(120px,1fr)]">
          <!-- days injected here -->
        </div>
      </div>

      <!-- Legend -->
      <div class="flex flex-wrap items-center gap-3 text-sm text-neutral-600 dark:text-neutral-300">
        <span class="inline-flex items-center gap-2">
          <span class="inline-block w-2.5 h-2.5 rounded-full bg-indigo-500"></span> Event
        </span>
        <span class="inline-flex items-center gap-2">
          <span class="inline-block w-4 h-4 rounded-full border-2 border-emerald-500"></span> Today
        </span>
        <span class="inline-flex items-center gap-2">
          <span class="inline-block w-4 h-4 rounded-md bg-neutral-100 dark:bg-neutral-800"></span> Other month
        </span>
      </div>
    </div>
  </div>

  <script>
    // --- Utilities -----------------------------------------------------------
    const pad = n => String(n).padStart(2, '0');
    const fmtKey = (d) => `${d.getFullYear()}-${pad(d.getMonth()+1)}-${pad(d.getDate())}`;

    const startOfMonth = (d) => new Date(d.getFullYear(), d.getMonth(), 1);
    const endOfMonth = (d) => new Date(d.getFullYear(), d.getMonth() + 1, 0);
    const startOfGrid = (d) => {
      const first = startOfMonth(d);
      const day = first.getDay(); // 0=Sun
      const gridStart = new Date(first);
      gridStart.setDate(first.getDate() - day);
      return gridStart;
    };
    const addDays = (d, n) => {
      const copy = new Date(d);
      copy.setDate(copy.getDate() + n);
      return copy;
    };

    // --- Example events (swap this out with your data) -----------------------
    // Map of ISO "YYYY-MM-DD" -> array of event objects
    const events = {
      // sample: dots + hover titles
      // '2025-09-08': [{title:'Design review'}, {title:'Dentist'}, {title:'1:1'}],
      // '2025-09-12': [{title:'Ship v1'}],
    };

    // --- State ---------------------------------------------------------------
    const today = new Date();
    let view = new Date(today.getFullYear(), today.getMonth(), 1);
    let lastDir = 'none'; // 'left' or 'right' for slide direction

    // --- DOM refs ------------------------------------------------------------
    const grid = document.getElementById('grid');
    const label = document.getElementById('monthLabel');
    const todayBadge = document.getElementById('todayBadge');
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');
    const todayBtn = document.getElementById('todayBtn');

    // --- Render --------------------------------------------------------------
    function render() {
      // Header
      const locale = navigator.language || 'en-US';
      const mo = view.toLocaleString(locale, { month: 'long' });
      label.textContent = `${mo} ${view.getFullYear()}`;

      // Today badge if viewing current month
      if (view.getFullYear() === today.getFullYear() && view.getMonth() === today.getMonth()) {
        todayBadge.classList.remove('hidden');
      } else {
        todayBadge.classList.add('hidden');
      }

      // Build 6x7 grid (always 42 cells)
      const frag = document.createDocumentFragment();
      grid.innerHTML = '';

      const gridStart = startOfGrid(view);

      for (let i = 0; i < 42; i++) {
        const d = addDays(gridStart, i);
        const inMonth = d.getMonth() === view.getMonth();
        const isToday = fmtKey(d) === fmtKey(today);

        const cell = document.createElement('button');
        cell.type = 'button';
        cell.setAttribute('tabindex', '0');
        cell.setAttribute('aria-label', d.toDateString());
        cell.className = [
          "group relative flex flex-col items-start justify-start p-2 text-left focus-ring",
          "border border-transparent",
          inMonth ? "bg-white dark:bg-neutral-900" : "bg-neutral-50 dark:bg-neutral-800/40 text-neutral-400 dark:text-neutral-500",
          "hover:bg-neutral-50 dark:hover:bg-neutral-800",
          "transition"
        ].join(' ');

        // day number
        const num = document.createElement('div');
        num.className = "absolute top-1 left-1 text-lg font-semibold";
        num.textContent = d.getDate();

        // today ring
        if (isToday) {
          const ring = document.createElement('div');
          ring.className = "absolute top-1 right-1 w-6 h-6 rounded-full border-2 border-emerald-500 pointer-events-none";
          cell.appendChild(ring);
        }

        // events dots
        const list = events[fmtKey(d)] || [];
        if (list.length) {
          const dots = document.createElement('div');
          dots.className = "mt-auto flex gap-1";
          list.slice(0,3).forEach(ev => {
            const dot = document.createElement('span');
            dot.className = "w-2.5 h-2.5 rounded-full bg-indigo-500 group-hover:scale-110 transition";
            dot.title = ev.title;
            dots.appendChild(dot);
          });
          if (list.length > 3) {
            const more = document.createElement('span');
            more.className = "text-[10px] text-neutral-500 dark:text-neutral-400";
            more.textContent = `+${list.length-3}`;
            dots.appendChild(more);
          }
          cell.appendChild(dots);
        }

        // hover accent
        const hoverAccent = document.createElement('span');
        hoverAccent.className = "pointer-events-none absolute inset-0 rounded-md ring-1 ring-inset ring-transparent group-hover:ring-indigo-300/60 dark:group-hover:ring-indigo-500/40";
        cell.appendChild(hoverAccent);

        cell.appendChild(num);

        // keyboard hint: Enter logs date (you can replace with your handler)
        cell.addEventListener('keydown', (e) => {
          if (e.key === 'Enter') {
            console.log('Selected date:', fmtKey(d));
            cell.classList.add('press');
            setTimeout(() => cell.classList.remove('press'), 120);
          }
        });

        // click handler demo
        cell.addEventListener('click', () => {
          console.log('Selected date:', fmtKey(d));
          cell.classList.add('press');
          setTimeout(() => cell.classList.remove('press'), 120);
        });

        frag.appendChild(cell);
      }

      // slide direction class
      if (lastDir === 'left') grid.classList.add('slide-in-left');
      if (lastDir === 'right') grid.classList.add('slide-in-right');
      if (lastDir === 'none') grid.classList.add('fade-in');

      grid.appendChild(frag);

      // Clean up animation classes after they play
      grid.addEventListener('animationend', () => {
        grid.classList.remove('slide-in-left', 'slide-in-right', 'fade-in');
      }, { once: true });
    }

    // --- Navigation ----------------------------------------------------------
    function go(deltaMonths) {
      const currentMonth = view.getMonth();
      view = new Date(view.getFullYear(), currentMonth + deltaMonths, 1);
      lastDir = deltaMonths > 0 ? 'right' : 'left';
      render();
    }
    function goToday() {
      view = new Date(today.getFullYear(), today.getMonth(), 1);
      lastDir = 'none';
      render();
    }

    prevBtn.addEventListener('click', () => go(-1));
    nextBtn.addEventListener('click', () => go(1));
    todayBtn.addEventListener('click', goToday);

    // Keyboard shortcuts
    document.addEventListener('keydown', (e) => {
      if (e.target !== document.body) return; // don't hijack when focused inside cells
      if (e.key === 'ArrowLeft') go(-1);
      if (e.key === 'ArrowRight') go(1);
      if (e.key.toLowerCase() === 't') goToday();
    });

    // --- Demo: preload some events (remove in production) --------------------
    (function seedDemo() {
      const base = new Date();
      const k1 = fmtKey(new Date(base.getFullYear(), base.getMonth(), 8));
      const k2 = fmtKey(new Date(base.getFullYear(), base.getMonth(), 12));
      const k3 = fmtKey(new Date(base.getFullYear(), base.getMonth(), 21));
      events[k1] = [{title:'Design review'}, {title:'Dentist'}, {title:'1:1'}, {title:'Extra'}];
      events[k2] = [{title:'Ship v1'}];
      events[k3] = [{title:'Team offsite'}];
    })();

    // Initial render
    render();
  </script>
</body>
</html>
